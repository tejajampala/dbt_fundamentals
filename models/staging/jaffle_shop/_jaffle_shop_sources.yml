sources:
    - name: jaffle_shop
      database: raw
      schema: jaffle_shop
      config: 
      # changed to config in v1.9
        freshness: # default freshness
          warn_after: {count: 12, period: hour}
          error_after: {count: 24, period: hour}

      loaded_at_field: _etl_loaded_at

      tables:
        - name: customers
          freshness: null
          columns:
            - name: id
              data_tests:
                - unique
                - not_null
            - name: first_name
              data_tests:
                - dbt_utils.not_empty_string
        - name: orders
          freshness: null
          columns:
            - name: id
              data_tests:
                - unique
                - not_null
            - name: status
              data_tests:
                - accepted_values:
                    values:
                      - 'returned'
                      - 'completed'
                      - 'return_pending'
                      - 'shipped'
                      - 'placed'
            - name: user_id
              data_tests:
                - relationships:
                    field: id
                    to: source('jaffle_shop', 'customers')
        - name: order_items
          columns:
            - name: product_price
              data_tests:
                - greater_than_0

